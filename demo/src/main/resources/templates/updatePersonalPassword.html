<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8"/>
<title>updatePersonalPassword</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/base.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/personalLeftNav.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/personal.css}" />
<style type="text/css">

</style>
</head>
<body>
	<div class="bodys">
		<!-- 引入左侧导航栏 -->
		<div th:replace="personalLeftNav :: html"></div>
		<!-- 引入个人资料侧边栏 -->
		<div class="navigationDiv" th:replace="personal :: personalNavigation"></div>
		<div class="personalMessage">
			<div class="personalFormDiv">
				<form action="#" id="updateForm" th:object="${session.user}">
					<input type="hidden" name="id" th:value="*{id}"/><br/>
					<span class="formText">原密码</span>
					<input type="text" id="oldPassword" name="oldPassword" /><br/>
					<span class="formText">新密码</span>
					<input type="text" id="newPassword" name="newPassword" /><br/>
					<span class="formText">重复新密码</span>
					<input type="text" id="againNew"/><br/>
					<input type="button" id="upPersonalBut" value="修改" />
				</form>
			</div>
		</div>
	</div>
</body>
<script th:src="@{/js/jquery-1.10.2.min.js}" type="text/javascript"></script>
<script type="text/javascript" th:inline="javascript">
	/* 提交前检测两次输入的新密码是否相同 */
	$("#upPersonalBut").click(function(){
		if($("#newPassword").val()==$("#againNew").val()){
			$.ajax({
				url:[[@{updatePersonalPassword}]],
				data:$("#updateForm").serialize(),
				type:"post",
				dataType:"json",
				success:function(obj){
					if(obj.state==0){
						location=[[@{showPersonal}]];
						}
					$("#message").html(obj.message);
				}
			});
		}
	});
	
</script>
</html>